<div class="modal-header header-info">
  <h4 class="modal-title"><i class="fas fa-info-circle"></i> {{contactDetail ? "Edit" : "Add"}} Contact Detail</h4>
</div>
<div class="modal-body offset-md-1">
  <form [formGroup]="contactDetailForm" class="form-style" (ngSubmit)="SaveContactDetail()">
    <!-- Contact Detail Type -->
    <div class="form-row">
      <div class="col-md-10">        
        <div class="row" name="contactDetailTypeId">
          <div class="col-md-6">
            <label for="contactDetailTypeId">Contact Detail Type</label>
            <select
              class="custom-select custom-select-lg mb-2 form-control"
              formControlName="contactDetailTypeId"
              #contactDetailTypeId
              id="contactDetailTypeId"
            >              
              <option *ngFor="let item of contactDetailTypes"                 
                [selected]="item.id==controls.contactDetailTypeId.value"
                [value]="item.id"
              >
                {{item.name}}
              </option>
            </select>
          </div>      
        </div>                      
      </div>
    </div>
    <!-- Contact Detail Type Errors -->
    <div class="form-row" *ngIf="controls.contactDetailTypeId.errors">
      <div class="col-md-4 mb-2">
        <div
          class="invalid-field"
          *ngIf="controls.contactDetailTypeId.errors.required"
        >
          <span>* Contact detail type is required</span>
        </div>        
      </div>
    </div>
    <!-- Address -->
    <div class="form-row">
      <div class="col-md-10">
        <div class="row" name="address">
          <div class="col-md-12">
            <label for="address">Address</label>            
            <input
              type="text"             
              class="form-control"   
              id="address1"
              #address1              
              formControlName="address1"           
            />
          </div>             
        </div>
        <div class="row address-row">
          <div class="col-md-12">                     
            <input
              type="text"              
              class="form-control"  
              id="address2"
              #address2              
              formControlName="address2"          
            />
          </div>             
        </div> 
        <div class="row address-row">
          <div class="col-md-12">                   
            <input
              type="text"             
              class="form-control"   
              id="address3"
              #address3              
              formControlName="address3"           
            />
          </div>             
        </div>   
      </div>
    </div>       
    <!-- Town -->
    <div class="form-row">
      <div class="col-md-12">
        <div class="row" name="town">
          <div class="col-md-6">  
            <label for="town">Town</label>                 
            <input
              type="text"             
              class="form-control"   
              id="town"
              #town              
              formControlName="town"           
            />
          </div>             
        </div>  
      </div>
    </div>
    <!-- Postcode -->
    <div class="form-row">
      <div class="col-md-10">
        <label for="postcode">Postcode</label>
        <div class="row" name="postcode">
          <div class="col-md-4">            
            <input
              type="search"
              maxlength="8"
              minlength="6"
              formControlName="postcode"
              #postcode
              id="postcode"
              oninput="this.value = this.value.toUpperCase()"              
              class="form-control"
              (input)="ClearCoordinates()"
              [ngClass]="{
                'is-invalid': controls.postcode.errors,
                'is-valid': !controls.postcode.errors
              }" 
              />
          </div>
          <div class="col-md-3">
            <div class="button-container">
              <button
                type="button"
                class="btn btn-primary .btn-validate-postcode"
                placement="top"
                ngbTooltip="Validate postcode"
                [openDelay]="1000"
                [closeDelay]="500"
                tooltipClass="subtle-tooltip"
                (click)="ValidatePostcode()"
                [disabled]="controls.postcode.errors && controls.postcode.errors.required"
              >
                {{ isSearchingForPostcode ? "Searching" : "Validate" }}
                <span
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                  *ngIf="isSearchingForPostcode"
                >
                </span>
              </button>                                      
            </div>
          </div>       
        </div>
      </div>      
    </div>
    <!-- Postcode Errors -->
    <div class="form-row" *ngIf="controls.postcode.errors">
      <div class="col-md-4 mb-2">
        <div
          class="invalid-field"
          *ngIf="controls.postcode.errors.required"
        >
          <span>* Postcode is required</span>
        </div> 
        <div
          class="invalid-field"
          *ngIf="controls.postcode.errors.InvalidPostcode"
        >
          <span>* Please validate postcode</span>
        </div>        
      </div>
    </div>
    <!-- Latitude and Longitude -->
    <div class="form-row" *ngIf="controls.latitude.value && controls.longitude.value">
      <div class="col-md-10">
        <div class="row" name="coordinates">
          <div class="col-md-4">
            <label for="latitude">Latitude</label> 
            <input
              type="text"             
              class="form-control"   
              id="latitude"
              #latitude              
              formControlName="latitude"                     
            />
          </div>
          <div class="col-md-4">
            <label for="longitude">Longitude</label> 
            <input
              type="text"             
              class="form-control"   
              id="longitude"
              #longitude              
              formControlName="longitude"                      
            />
          </div>
        </div>
      </div>
    </div>
    <!-- Email -->
    <div class="form-row">
      <div class="col-md-8">
        <div class="row" name="emailAddress">
          <div class="col-md-6">
            <label for="email">Email</label>                     
            <input
              type="text"             
              class="form-control"   
              id="emailAddress"
              #emailAddress              
              formControlName="emailAddress"           
            />
          </div>             
        </div>  
      </div>
    </div>
    <!-- Telephone -->
    <div class="form-row">
      <div class="col-md-8">
        <div class="row" name="telephoneNumber">
          <div class="col-md-6">
            <label for="telephoneNumber">Telephone</label>                     
            <input
              type="text"             
              class="form-control"   
              id="telephoneNumber"
              #telephoneNumber              
              formControlName="telephoneNumber"           
            />
          </div>             
        </div>  
      </div>
    </div>
    <!-- Mobile -->
    <div class="form-row">
      <div class="col-md-8">
        <div class="row" name="mobileNumber">
          <div class="col-md-6">  
            <label for="mobileNumber">Mobile</label>                   
            <input
              type="text"             
              class="form-control"   
              id="mobileNumber"
              #mobileNumber              
              formControlName="mobileNumber"           
            />
          </div>             
        </div>  
      </div>
    </div>
    <div class="form-row">
      <div class="col-md-4 offset-md-8 text-right cancelOrSave">
        <button
          type="button"
          class="btn btn-standard btn-cancel"
          (click)="Cancel()"          
        >Cancel</button>
        <button
          type="submit"
          class="btn btn-primary btn-standard"          
        >Save</button>
      </div>
    </div>       
  </form>
</div>
