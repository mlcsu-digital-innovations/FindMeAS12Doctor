<app-navbar></app-navbar>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-label class="assessment-view-last-updated">
          Last Updated: {{assessmentLastUpdated | date: "dd/MM/yyyy HH:mm:ss"}}
        </ion-label>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label><strong>Referral Id:</strong> {{assessmentView?.referralId}}</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label><strong>Patient Id:</strong> {{assessmentView?.patientIdentifier}}</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>{{assessmentView?.dateTime | date: "d MMMM yyyy H:mm"}}</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>
            <strong>Assessment Speciality: </strong> 
            <ion-text class="ion-text-wrap">{{assessmentView?.specialityName}}</ion-text>
          </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item class="item item-text-wrap">
          <ion-label>
            {{assessmentView?.address1}}
            <br *ngIf="assessmentView?.address1?.length > 0" />
            {{assessmentView?.address2}}
            <br *ngIf="assessmentView?.address2?.length > 0" />
            {{assessmentView?.address3}}
            <br *ngIf="assessmentView?.address3?.length > 0" />             
            {{assessmentView?.address4}}
            <br *ngIf="assessmentView?.address4?.length > 0" />
            {{assessmentView?.postcode}}
          </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>
            <ion-text *ngFor="let doctor of assessmentView?.doctorsAllocated">
              {{doctor.displayName}}<br />
            </ion-text>
          </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item class="item item-text-wrap">
          {{assessmentView?.meetingArrangementComment}}
        </ion-item>
      </ion-col>
    </ion-row>    

    <ion-row>
      <ion-col>
        <ion-button 
          *ngIf="assessmentView 
            && assessmentView.isSuccessful===null 
            && assessmentView.doctorsAllocated
            && assessmentView.doctorsAllocated.length > 0"
          expand="block" 
          color="warning" 
          (click)="this.updateAssessment()">
          Update status
        </ion-button>
      </ion-col>
    </ion-row>

  </ion-grid>
</ion-content>