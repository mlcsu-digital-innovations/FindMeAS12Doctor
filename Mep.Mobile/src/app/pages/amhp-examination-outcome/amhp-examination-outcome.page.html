<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-label class="examination-last-updated">
          Last Updated: {{examinationLastUpdated | date: "dd/MM/yyyy HH:mm:ss"}}
        </ion-label>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label><strong>Referral Id: </strong>{{examinationView ? examinationView.referralId : ""}}</ion-label>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label>
            <strong>Patient Id: </strong>{{examinationView ? examinationView.patientIdentifier : ""}}
          </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label><strong>Examination Successful?</strong></ion-label>
          <ion-toggle [(ngModel)]="examinationSuccessful"></ion-toggle> 
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row *ngIf="!examinationSuccessful">
      <ion-col>
        <ion-item>
          <ion-select 
            class="unsuccessful-exam-type" 
            interface="action-sheet" 
            placeholder="Unsuccessful Exam Type"
            [(ngModel)]="unsuccessfulExaminationTypeId">
            <ion-select-option 
              *ngFor="let unsuccessfulExamType of unsuccessfulExaminationTypeList"
              [value]="unsuccessfulExamType.id">
              <ion-label>{{unsuccessfulExamType.name}}</ion-label>
            </ion-select-option>           
          </ion-select>
        </ion-item>
      </ion-col>
    </ion-row>

    <ion-row *ngIf="examinationView?.doctorsAllocated?.length > 0">
      <ion-col>
        <ion-list>
          <ion-list-header>Confirm attending doctors</ion-list-header>
          <div *ngFor="let doctor of examinationView.doctorsAllocated">
            <ion-item>
              <ion-label><strong>{{doctor.displayName}}</strong></ion-label>
              <ion-toggle [(ngModel)]="doctor.attended"></ion-toggle>              
            </ion-item>
            <ion-item>
              <ion-label><strong>GMC number:Â </strong>{{doctor.gmcNumber}}</ion-label>
            </ion-item>            
          </div>
          
        </ion-list>
      </ion-col>
    </ion-row>

    <ion-row *ngIf="examinationSuccessful || unsuccessfulExaminationTypeId">
      <ion-col offset="5">
        <ion-icon name="save" (click)="confirmSave()"></ion-icon>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
